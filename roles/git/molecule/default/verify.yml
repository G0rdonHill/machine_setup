---
- name: Verify
  hosts: all
  tasks:
  - name: Check that the gitcconfig exists
    ansible.builtin.stat:
      path: "/home/{{ ansible_user }}/.gitconfig"
    register: stat_result

  - name: Assert file exists
    ansible.builtin.assert:
      that:
        - stat_result.stat.exists

  - name: Gather package facts
    ansible.builtin.package_facts:
      manager: auto

  - name: Verify Packages
    ansible.builtin.assert:
      that: "'{{ item }}' in ansible_facts.packages"
    with_items:
      - git
  vars:
    ansible_user: root
